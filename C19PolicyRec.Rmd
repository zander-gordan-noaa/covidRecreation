---
title: "COVID-19 Policy Stringency and Outdoor Recreation: The Case of Resident Marine Sportfishing in the United States"
author:
  - name: Alexander Gordan
    email: alexander.gordan@noaa.gov
    affiliation: ECS
  - name: David W. Carter
    email: david.w.carter@noaa.gov
    affiliation: NOAA Fisheries Southeast Fisheries Science Center
    footnote: Corresponding Author
  - name: Christopher Liese
    email: christopher.liese@noaa.gov
    affiliation: NOAA Fisheries Southeast Fisheries Science Center
address:
  - code: ECS
    address: ECS, 2750 Prosperity Ave STE 600, Fairfax, VA 22031
  - code: NOAA Fisheries Southeast Fisheries Science Center
    address: NOAA Southeast Fisheries Science Center, 75 Virginia Beach Drive, Miami, FL, 33149
header-includes:
   - \usepackage{threeparttable}
   - \usepackage{flafter}
abstract: |
  Governments responded to the Covid-19 pandemic with different policies to curtail the spread of the virus. We show how sportfishing levels are related to the stringency of Covid-19 policies. Specifically, we relate the total
  number of resident sportfishing trips taken each month in each of 16 U.S. states to a state-level index
  of COVID policy stringency. We model the number of recreational fishing trips taken in each state-month using a fixed effect Poisson
  regression model with state-specific seasonality and time trends. We
  estimate separate models for different fishing modes, and find that for fishing trips
  taken on private boats the number
  of trips may have increased by approximately 20% at moderate levels of stringency, while at high levels of stringency
  like those experienced in many states in March and April of 2020, trips may have stayed
  constant or declined by 10-20%. Similar inverse-U shaped relationships between
  trips and stringency are found for fishing trips from the shore and from charter 
  boats.
  
bibliography: C19PolicyRec.bib
output:
  bookdown::pdf_book:
    base_format: rticles::plos_article
  extra_dependencies: ["booktabs", "threeparttable"]
csl: plos.csl
editor_options: 
  chunk_output_type: console
---


```{r setup0,echo=FALSE}

knitr::opts_chunk$set(echo = FALSE,message = FALSE,warning = FALSE)

```


```{r setup}

library(feather)
library(survey)
options(survey.lonely.psu="adjust",multicore=TRUE)
library(tidycensus)
library(tidyverse)
library(ggplot2)
library(dplyr)
library(texreg)
library(cdlTools)
library(kableExtra)
library(ciTools)
library(sandwich)
library(lmtest)
library(fst)

library(fixest)
library(car)
library(clubSandwich)
library(timetk)
library(lubridate)

library(ggpubr)
library(ggeffects)

```

```{r,eval=FALSE}

#RUN ONCE TO CREATE DATASET: EVAL SET TO FALSE AFTER

trips <- read_feather("data/trips1721.feather")

tripsTM <- trips %>% 
  filter(wp_int > 0, month != 99, MODE_FX != 4, ST == ST_RES) %>% 
  # exclude anomalous observations
  mutate(PARTY = if_else(PARTY > 12, NA_real_, PARTY),
         HRSF = if_else((HRSF > 24) | (HRSF == 0), NA_real_, HRSF)) %>% 
  complete(YEAR,month,MODE_FX,ST) %>%
  group_by(YEAR,month,MODE_FX,ST) %>%
  summarize(N_obs = n(),
            Trips = sum(wp_int,na.rm=TRUE),
            Hrsf  = weighted.mean(HRSF,wp_int,na.rm=TRUE),
            Party = weighted.mean(PARTY,wp_int,na.rm=TRUE),
            .groups = "drop") %>% 
  mutate(MONTH = as.numeric(month),
         year = as.numeric(as.character(YEAR)),
         fips = as.numeric(as.character(ST)))

#Function to retrieve annual state population estimates from ACS
acsY = function(y) {
  d=get_acs(geography = "state", 
            variables = "B01001_001", 
            year = y,
            survey = "acs1")
  d$year=y
  return(d)
}

#Retrieve state population estimates for 2017-2019
pop=do.call(rbind,lapply(2017:2019,FUN=function(x) acsY(x)))
pop

pop20 <- get_decennial(geography = "state", 
                       variables = "P1_001N", 
                       year = 2020)

NST_EST2021_alldata <- read_csv("data/NST-EST2021-alldata.csv")

pop21 <- NST_EST2021_alldata %>% 
  rename(fips = STATE, Population = POPESTIMATE2021) %>% 
  filter(fips != "00") %>% 
  select(fips, Population) %>% 
  mutate(year = 2021)


pop20 <- pop20 %>% 
  rename(fips = GEOID, Population = value) %>% 
  select(fips, Population) %>% 
  mutate(year = 2020)

pop <- pop %>% 
  rename(fips = GEOID, Population = estimate) %>% 
  select(fips, Population, year) %>% 
  bind_rows(pop20) %>% 
  bind_rows(pop21) %>% 
  mutate(fips = as.integer(fips))

tripsTMP <- tripsTM %>% 
  left_join(pop, by = c("fips", "year"))

fips_codes_state <- fips_codes %>% select(state_code, state_name) %>% distinct()

stringency <- read_csv("data/OxCGRT_US_latest.csv") %>% 
  rename(State = RegionName) %>% 
  mutate(Year = as.integer((substr(Date, start = 1, stop = 4))),
         Month = substr(Date, start = 5, stop = 6),
         Day = substr(Date, start = 7, stop = 8)) %>% 
  # next 2 commands assign the last known value of Stringency for days with NA
  arrange(State, Year, Month, Day) %>% 
  fill(StringencyIndex) %>% 
  group_by(State, Year, Month) %>%
  summarise(Stringency = mean(StringencyIndex),
            .groups = "drop") %>% 
  left_join(fips_codes_state, by = c("State" = "state_name")) %>% 
  rename(fips = state_code) %>% 
  mutate(fips = as.integer(fips))

fips_codes_state_alt <- fips_codes_state %>% mutate(state_code = as.numeric(state_code))

tripsTMPS <- tripsTMP %>% 
  left_join(stringency, by = c("YEAR" = "Year", "month" = "Month", "fips" = "fips")) %>% 
  rename(Year = YEAR,
         Month = month,
         Mode= MODE_FX,
         Obs = N_obs,
         FIPS = fips) %>% 
  select(!State) %>% 
  left_join(fips_codes_state_alt, by = c("FIPS" = "state_code")) %>% 
  rename(State = state_name) %>% 
  select(Year,Month,Mode,Obs,Trips,Hrsf,Party,FIPS,State,Population,Stringency) %>% 
  mutate(TPC = Trips / Population,
         Stringency = if_else(is.na(Stringency), 0, Stringency),
         TripsR=round(Trips,0),
         StateF=as.factor(gsub(" ","",State)),
         StateF=relevel(StateF,ref="Florida"),
         MonthF=as.factor(as.numeric(Month)),
         MonthF=relevel(MonthF,ref="6"),
         YearF=as.factor(as.numeric(Year)),
         YearF=relevel(YearF,ref="2019"),
         sm=interaction(StateF,MonthF),
         sm=relevel(sm,ref="Florida.6"),
         ym=interaction(as.factor(Year),MonthF),
         ym=relevel(ym,ref="2019.6"),
         Year19s=Year-2019,
         date = make_date(Year, Month,1))

saveRDS(tripsTMPS, "tripsTMPS.rds")

```

```{r loadData,echo=FALSE,warning=FALSE}
#Load the final dataset
tripsTMPS=readRDS("tripsTMPS.rds")

no_data_sms<- tripsTMPS %>% 
  filter(Mode == "7") %>% 
  group_by(State, Month) %>% 
  summarise(max_Trips = max(Trips), .groups = "drop") %>% 
  filter(max_Trips == 0) %>% 
  select(State, Month)

data_for_new_model <- tripsTMPS %>% 
  anti_join(no_data_sms, by = c("State", "Month"))

no_data_sms5<- tripsTMPS %>%
  filter(Mode == "5") %>%
  group_by(State, Month) %>%
  summarise(max_Trips = max(Trips), .groups = "drop") %>%
  filter(max_Trips == 0) %>%
  select(State, Month)

data_for_new_model5 <- tripsTMPS %>%
  anti_join(no_data_sms5, by = c("State", "Month"))

max_actual_stringency <- tripsTMPS %>% select(Stringency) %>% max %>% floor

```

# Introduction

Saltwater angling is a major outdoor activity in the U.S., with expenditures on fishing trips totaling more than $10 billion annually
as of 2017 @lovell2020economic. Roughly 4% of Americans participate in saltwater fishing compared with around around 20% for running, the most common outdoor recreation activity @2019OutdoorReport.  Furthermore, in some marine fisheries, recreational angling is a substantial component of harvest, especially in the Southeastern US, where sportfishing can account for a large share of the harvest of commercially and culturally significant species @lewin2019potential.

The COVID-19 pandemic and ensuing policy responses had far-reaching social and economic implications, and marine angling is no exception. Landry et. al. @landry2021has summarize the potential pathways through which COVID-19 and related policy responses may affect outdoor recreation. For recreational fishing the potential pathways are as follows:

1. Site closures may force anglers to cancel trips if, for example, boat ramps or piers were closed.

2. Concern about infection risk may have led people to cancel planned trips or cease to plan new trips.

3. People may have more leisure time due to work-from-home flexibility, reduced commuting time, or job loss.

4. A decrease in substitute leisure activities, especially indoor activities may have made angling relatively more attractive as a way to spend one's leisure time [@midway2021covid; @morales2021contrasting]

The first two pathways imply a decrease in fishing effort while the latter two imply an increase. @link2021noaa documents interruptions in U.S. marine fishery data collections due to COVID-19 policies such as lockdowns. Many of these interruptions also affected anglers' access to fishing launch sites. Our focus is on saltwater anglers, but @paradis2021can found that around ninety percent of freshwater fishing jurisdictions in North America were able to keep fishing open during spring of 2020. In a national survey of U.S. anglers, most respondents experienced some access restrictions, but nearly all respondents reported that they did not think that recreational fishing was unsafe during the early stages of the pandemic in 2020 @midway2021covid. The same study found that anglers reported very little change in the number of trips they took relative to the same period in years past. However, this is self-reported changes for Spring 2020 averaged over various levels of COVID-19 policy stringencies.  Actual changes in effort over a longer period of time and range of COVID-19 policy stringencies may be different.     

The net effect of the four pathways depends on prevailing conditions at the time effort is measured. For example, early in the response to the pandemic when lockdowns where common, the effect of site closures and concerns about infection risk would dominate and effort should be relatively low. At other times, however, as lockdowns are relaxed, but restrictions on indoor gatherings and leisure travel remain, effort could increase due the effects of increased leisure time and lack of substitute activities for that leisure time. A similar type of variation in trip taking behavior could happen over space, i.e. the different levels of COVID-19 policy stringency in different jurisdictions (e.g., states) could contribute to variations in angler trip taking behavior across jurisdictions.

We use data on the estimated monthly number of saltwater fishing trips from states on the U.S. east coast along with a monthly, state-level measure of COVID-19 policy stringency to examine the relationship between the stringency of COVID-19 policy and the  level of marine angling activity. Our results suggest that the relationship is non-monotonic, whereby the number of fishing trips increases at moderate levels of COVID-19 policy, but declines at higher levels. This finding is important to understanding how people respond to measures aimed at containing virus spread and can help in planning during future pandemics.

# Methods

## Data

To conduct our analysis, we construct a panel dataset at the state-month level spanning 2017 through 2021 for 16 US states, by merging two primary data sources: (1) the Marine Recreational Information Program (MRIP), which provides the necessary angler survey data to construct monthly estimates of the fishing activity in each state, providing our dependent variable, and (2) the Oxford COVID Government Response Tracker (OxCGRT), which provides fine-grained (daily) variation in the level of COVID policy stringency in each of the US states, which we collapse to the monthly level to provide our key independent variable.
Below, we describe in greater detail these two major data sources, as well as state population data used in the analysis,  and our methodology for processing these data sources to produce our panel dataset.

### MRIP

The MRIP program oversees survey research to monitor the level of marine angling activity in a consistent fashion throughout US fisheries (we discuss the structure of these surveys in greater detail below). The program consists of 2 main data collections. The first data collection we use from MRIP is the Fishing Effort Survey (FES), a mail survey which asks anglers to recall how many trips they have been on recently, in order to get information on the total level of fishing activity. The other data collection is the Access Point Angler Intercept Survey (APAIS), an intercept survey that captures trip-level data about catch, angler attributes, and trip details such as area fished.



We use the MRIP data for the 16 states along the Gulf and Atlantic coasts in which it is available. Specifically, the states are: AL, CT, DE, FL, GA, ME, MD, MA, MS, NH, NJ, NY, NC, RI, SC and VA. The MRIP program publishes estimates of fishing activity for 2-month periods referred to as waves, but rather than use these estimates we use the publicly-available microdata files to estimate total trips in each state-month. These microdata are anonymized versions of the completed APAIS data and are thus trip-level data, and they are augmented with survey weights derived from the FES data that allow for the construction of estimates that are representative of all trips covered by the MRIP program. The primary unit of measurement for our aggregated summary of the MRIP data is the angler-trip (hereafter abbreviated simply to trip), representing the total number of distinct trips multiplied by the average party size of those trips.

Creating our own estimates also allows us to customize the estimates, and we choose to specifically create
estimates of the number of trips taken by in-state residents. Considering only 
resident fishing trips is a simple way to achieve our goal of estimating the relationship
between trips taken and COVID stringency. In the appendix, we also consider trips taken
across state lines, where
for out-of-state trips the relevant independent variables include the stringency
level prevailing at the trip-taker's origin as well as at the destination.

We assemble monthly observations from 2017 through 2021 for three different modes of fishing: private boats, charter boats, and shore fishing. With `r length(unique(tripsTMPS$Year))` years, `r length(unique(tripsTMPS$Month))` months in each year and `r length(unique(tripsTMPS$State))` states, the data set for each mode could potentially have `r length(tripsTMPS$Trips[tripsTMPS$Mode==7])` observations. However, the data collection is not conducted for certain state-months for which
there is known to be minimal fishing activity for a given mode, which are typically
the winter months in colder states. The only states for which data is 
collected in all months for all modes are Florida, Alabama, and North Carolina. There are a total of 35 state-months for
which no data is collected for the private boat and shore modes, so data for these 
modes includes only 785 observations, and 50 state-months
have no data collection for the charter mode, leading to 735 observations. 


### COVID Stringency Index

Our key independent variable, on state-month level COVID stringency, comes from the Oxford COVID Government Response Tracker project. This data, as described by @hale2021global, is a global dataset tracking government response to COVID across 19 distinct policy indicators such as school- and work-closures, stay-at-home-orders, and movement restrictions. These data are tracked at the daily level, and for the US are available by state. The data have been continuously updated since February 2020 by a team of volunteers who parse government reports, news, and other sources of info to create a standardized set of indicators which are comparable across the globe and across time. The full dataset includes indicators for economic response and health policy, as well as the closure indicators mentioned previously. The data product we use is the Stringency Index, which combines all 8 closure indicators, as well as a variable indicating the presence of public information campaigns, such as the "flatten the curve" campaign which was common throughout the US circa March and April 2020. All indicators in this index are recorded on discrete, ordinal scales with either 3, 4 or 5 ordinal levels. 

@hallas2021Variation present additional information pertinent to the US state-level data, as well as the stylized facts in the data, such as the multiple cycles of stringency at first tightening, followed by loosening policy until a new COVID wave and increased community transmission results in a re-tightening of COVID stringency. Additionally, over time the political gap in Stringency widened with democratic-led states having progressively tighter COVID policy compared to conservative states. 

We take the daily data for each state and collapse it to a state-month level dataset by taking the average value of the Stringency index for each day in the month. This data is then merged with the MRIP data for analysis.

### Population Data

In order to place the MRIP data on a comparable per-capita basis across states, we include information
on state populations using annual population estimates for each state in the sample. For 2017-2019, these are estimates from the American Community Survey, and for 2020 and 2021 we use figures from the Decennial Census.

### Descriptive Statistics


```{r trips-seasonality-plot,fig.height=6,fig.width=5,fig.align='center', fig.cap="2019 Monthly Marine Sportfishing Trips by State, relative to annual total. The seasonal profile of each state is plotted as a separate grey line, with each month's value expressed as a percentage of the total annual trips for the state. The bold line gives a simple average of these relative monthly values across the 16 states."}
mode_names <- c(
  `7` = "Private Trips",                  
  `5` = "Charter Trips",
  `3` = "Shore Trips"
                  )

tripsTMPS %>%
  filter(Year == 2019) %>%
  group_by(State, Mode) %>% 
  mutate(relative_TPC = TPC / sum(TPC)) %>% 
  ggplot(aes(x=Month, y=relative_TPC, group=State)) +
  geom_line(alpha = 0.08) +
  stat_summary(mapping = aes(x=Month,  y=relative_TPC, group = 1), 
               fun = "mean", 
               geom = "line",
               inherit.aes = FALSE) +
  ylab("Trips (as a fraction of annual total)") +
  facet_wrap(vars(Mode), scales = "free", nrow = 3, labeller = as_labeller(mode_names))
```

Figure \@ref(fig:trips-seasonality-plot) displays seasonal trends
in the level of trips across the 16 states in the dataset during 2019, for each mode of fishing. Each grey line plots
the seasonal pattern for one state, with the monthly values for each state displayed as a fraction of the annual total. The black line provides a simple average of these relative values across
the 16 states within each month, so that the black line represents the composite
national-level seasonality trend in fishing trips among these 16 states. July is
both the modal peak month among the states, and the peak month for the national 
trend, for all 3 modes of fishing. There are many state-months in which 0 trips are recorded, and in 
particular for the private mode there are only 4 states with positive trips in January: Florida, North Carolina, Alabama, and
Mississippi. 

We can see from Figure \@ref(fig:trips-seasonality-plot) that fishing activity for the private
mode is in most states fairly broadly distributed from April through November, with 
only 10 state-months accounting for more than 20% of the 
annual trips in a state, and a maximum of 35% for Maine in June. All but 1 of the 10
state-months with more than 20% of annual trips come from the Northern states of
Maine, New Hampshire, Massachusetts, Delaware and Rhode Island, with July in 
Mississippi as the exception. While the pattern for the shore mode is quite similar
to private mode, we can see that the charter mode has substantially more concentration
in the Summer, reflecting the fact that those fishing with their own equipment are
more likely to get use out of that equipment throughout the year, and vice versa.

```{r pString,fig.cap="Monthly 2020 stringency Index by State",fig.height=6,fig.width=5,fig.align='center'}
covid_colors <- c("NY" = "black", "FL" = "black", "AL" = "black", "other" = "grey")
covid_alpha <- c("NY" = 1, "FL" = 1, "AL" = 1, "other" = 0.5)
covid_linetype <- c("NY" = "dashed", "FL" = "dotted", "AL" = "dotdash", "other" = "solid")

tripsTMPS %>% 
  mutate(covid_cat = case_when(State == "New York" ~ "NY",
                               State == "Florida" ~ "FL",
                               State == "Alabama" ~ "AL",
                               TRUE ~ "other")) %>% 
  filter(Year > 2019) %>%
  mutate(Date = lubridate::make_date(Year, Month)) %>% 
  ggplot(aes(x=Date,y=Stringency, group=State, color=covid_cat, alpha=covid_cat, linetype=covid_cat)) +
  geom_line() + 
  ylab("stringency") + 
  scale_color_manual(values = covid_colors, guide = "none") +
  scale_alpha_manual(values = covid_alpha, guide = "none") + 
  scale_linetype_manual(values = covid_linetype)
```

Figure \@ref(fig:pString) shows the evolution of COVID policy stringency over the
course of 2020 and 2021 for each of the 16 states in our analysis. Following the initial 
uniform jumps in stringency during the March/April 2020 lockdowns, there is 
substantial variation between the states in how COVID policy evolved. Here we have
highlighted 3 states showing archetypal cases: (1) New York, which had 
consistently stringent COVID policy, (2) Alabama, where after April COVID policy was
loosened substantially, and stayed loose, and (3) Florida, which displays the most
variation in COVID policy over time. The substantial independent variation in these
series affords the opportunity to examine the relationship between COVID policy
stringency and fishing activity.


## Modeling Approach

We model the relationship between the aggregate monthly number of saltwater fishing trips trips taken in each state and the monthly COVID policy stringency using a fixed effect Poisson regression model with the following conditional mean:

$$\mu_{imy} = W_{iy}*\exp(\beta_1 S_{imy} + \beta_2 S_{imy}^2 + \alpha_{im} + \gamma_i y)$$
where for state $i$ during month $m$ and year $y$, $\mu_{imy}$ is the expected aggregate trips, $W_{iy}$ is the state population, and $S_{imy}$ is the monthly average COVID policy stringency. The coefficients $\beta_1$ and $\beta_2$ capture the aggregate relationship between stringency and trips taken, while the term $\alpha_{im}$ represents state-month fixed effects
which allow for state-specific seasonality trends in our model, and $\gamma_i$ is
a state-specific linear time trend. We choose a Poisson regression model to estimate this conditional mean function, following the advice of @wooldridge2010econometric who notes that estimating a Poisson model is the most
efficient method which is consistent when only the conditional mean needs to be correctly specified,
without needing to also correctly specify the conditional variance.

 We calculate
variance estimates clustered at the state level, so as to account for unmodeled
correlation between the number of trips taken in different periods within a state,
as may be the case for instance if unfavorable weather in a given month causes some
trips to be postponed to the following month. Furthermore, our clustered variance estimates
are adjusted for the fact that the number of clusters is small (16), and therefore
typical asymptotically-consistent variance estimators may have a downward bias.
Specifically, our variance estimates are calculated using a bias-reduced linearization
method proposed by @bell2002bias. We estimate the Poisson regression model using the `fixest` package 
in `R` @berge2018Efficient, and variance estimation is conducted through the `clubSandwich` package in `R`
by @pustejovsky2016Small.







# Results

Table \@ref(regResults) presents the results of
our estimated fixed effects Poisson regression models, with the state-specific time trends and 
seasonality fixed effects suppressed to focus on the coefficients of interest. In
each of the 3 fitted models for the different fishing modes, the first order relationship is an increase in fishing trips at moderate levels of policy stringency, with a second order effect dampening or even reversing
this relationship at higher levels of stringency. The first order relationships are significant
at the 1% level for private mode trips, and at the 5% level for shore mode, while 
the coefficients for the charter mode are significant only at the 10% level. The second order
coefficient is significant only for the private mode, though it has a negative sign
in all 3 independent models.

Figure \@ref(fig:tripStringRel)
represents these same relationships graphically, by plotting the estimated
model's predictions for the relative change in resident fishing trips at the
various possible levels of COVID stringnency. The solid line
provides the point estimates for predicted percentage change in trips, while the shaded areas plot
the 95% confidence intervals around these predictions. 

In interpreting these results, one consideration is that the estimated increase in trips at
moderate levels of policy stringency may reflect the dynamic behavior of anglers.
That is, since the periods of moderate stringency were immediately preceded by
periods of high stringency, the increase in trips may be due to  anglers
saving up time and money for going on trips when stringency was high, and additionally
having an increased desire to go fishing after having been unable or unwilling to go fishing
during the high stringency period. Our data do not provide sufficient resolution to
explicitly model such intertemporal substitution dynamics, which would be best
modeled at the level of individual anglers if individual-level panel data on fishing
activity were available, but nonetheless these dynamics are a plausible explanation
for the trend observed in the aggregate data.







```{r pfe,eval=FALSE}

rm=function(m,mn,y){
  
  if(m==5) {
    bd=data_for_new_model5
  } else {
    bd=data_for_new_model
  }
  
  d=subset(bd,Mode==m & Year %in% y)
  
  #Fixed effect poisson with:
  #Cluster robust standard errors with small-sample (small number of clusters) adjustment
  #Pustejovsky, J.E. and Tipton, E., 2018. Small-sample methods for cluster-robust
  #variance estimation and hypothesis testing in fixed effects models. Journal of Business
  #& Economic Statistics, 36(4), pp.672-683.
  
  #Baseline two-way fixed effect specification
  r0=fepois(TripsR ~ Stringency + I(Stringency^2) | StateF + YearF^MonthF ,
            data=d,offset = ~log(Population),
            vcov = function(x) vcovCR(x, type = "CR2",cluster=d$StateF))   
  
  ses0=coef_test(r0,vcov="CR2",cluster=d$State,test = "Satterthwaite")
  
  r= fepois(TripsR ~ Stringency + I(Stringency^2) | StateF^MonthF + StateF[Year19s] ,
            data=d,offset = ~log(Population),
            vcov = function(x) vcovCR(x, type = "CR2",cluster=d$StateF)) 
  
  ses=coef_test(r,vcov="CR2",cluster=d$State,test = "Satterthwaite")
  
  #Dataset to predict trips as a function of stringency
  #holding everything else constant.
  #Using June 2019 in Florida: zero stringency should correspond with
  #the predicted trips for this period in absence of stringency policies
  #Function to calculate the predicted trips
  #and associated confidence intervals using the 
  #delta method
  #The base prediction is for Wave 6 in Florida during 2019
  pDM=function(m,pop,x) {
    fe=fixef(m)
    feB=fe$`StateF^MonthF`["Florida_6"] + fe$StateF["Florida"]
    f=paste0(pop,"*exp(",feB," + ",x,"*Stringency + `I(Stringency^2)`*",x,"^2)")
    deltaMethod(m$coefficients,f,vcov=m$cov.scaled)}
  
  #Population in Wave 6 in Florida during 2019
  popE=d$Population[d$StateF=="Florida" & d$Year19s==0 & d$MonthF==6]
  
  p=t(sapply(0:max_actual_stringency,function(x) pDM(r,popE,x)))
  p=as.data.frame(apply(p,2,unlist))
  
  pp=ggplot(p, aes(x = 0:max_actual_stringency, y = Estimate, group = 1)) + 
    geom_line(col='black') + 
    geom_ribbon(aes(ymin = `2.5 %`, ymax = `97.5 %`), alpha = 0.1) +
    labs(title = mn,
         y="Expected June 2019 Florida Trips",
         x="Stringency") +
    geom_hline(yintercept=p[1,"Estimate"]) +
    scale_y_continuous(labels = scales::label_number(suffix = " M", scale = 1e-6))
  
  #Scaling the trip predictions to be relative to the base period
  ps=p
  ps[,"2.5 %"]=100*(ps[,"2.5 %"]-ps[1,"Estimate"])/ps[1,"Estimate"]
  ps[,"97.5 %"]=100*(ps[,"97.5 %"]-ps[1,"Estimate"])/ps[1,"Estimate"]
  ps[,"Estimate"]=100*(ps[,"Estimate"]-ps[1,"Estimate"])/ps[1,"Estimate"]
  
  pps=ggplot(ps, aes(x = 0:max_actual_stringency, y = Estimate, group = 1)) + 
    geom_line(col='black') + 
    geom_ribbon(aes(ymin = `2.5 %`, ymax = `97.5 %`), alpha = 0.1) +
    labs(title = mn,
         y=expression("%"  ~ Delta ~"Trips"),
         x="Stringency") +
    geom_hline(yintercept=0)
  
  #Elasticity calculations
  pme=t(sapply(0:max_actual_stringency,FUN=function(x) 
    deltaMethod(r$coefficients,paste0(x,"*(Stringency + `I(Stringency^2)`*2*",x,")"),vcov=r$cov.scaled)))
  pme=as.data.frame(apply(pme,2,unlist))
  
  ppe=ggplot(pme, aes(x = 0:max_actual_stringency, y = Estimate, group = 1)) + 
    geom_line(col='black') + 
    geom_ribbon(aes(ymin = `2.5 %`, ymax = `97.5 %`), alpha = 0.1) +
    labs(title = mn,
         y="Trip Elasticity",
         x="Stringency") +
    geom_hline(yintercept=0)
  
  
  return(list(reg0=r0,ses0=ses0,reg=r,ses=ses,pred=p,preds=ps,pplot=pp,pplots=pps,elast=pme,elastP=ppe))
  
}

pm=rm(7,"Private Boats",2017:2021)
cm=rm(5,"Charter Boats",2017:2021)
sm=rm(3,"Shore",2017:2021)

#Saving model and prediction objects because the predictions take long to run.
saveRDS(pm,"pm.rds")
saveRDS(cm,"cm.rds")
saveRDS(sm,"sm.rds")

```

```{r regTbl,results='asis'}

#Reading model and prediction objects
pm=readRDS("pm.rds")
cm=readRDS("cm.rds")
sm=readRDS("sm.rds")

texreg(list(pm$reg,cm$reg,sm$reg),custom.model.names = c("Private","Charter","Shore"),
       booktabs = TRUE,use.packages = FALSE,threeparttable=TRUE,
       label="regResults",caption.above = TRUE,digits=4,include.deviance=FALSE,include.bic=TRUE,include.loglik=FALSE,
       override.pvalues=list(pm$ses$p_Satt,cm$ses$p_Satt,sm$ses$p_Satt),
       caption = "Poisson Fixed Effect Regression of Trips on Covid-19 Stringency, by Mode",include.groups=FALSE,
       custom.note = "\n\\item %stars. SEs clustered by state \n\\item with small-sample adjustment.\n")

```


```{r tripStringRel,fig.cap="Predicted Percentage Change in Trips as a Function of the Stringency Index",fig.height=8,fig.width=4}

#Predicted trips as a function of stringency, including confidence intervals
pas=ggarrange(pm$pplots,cm$pplots,sm$pplots,ncol = 1, nrow = 3)
pas

```


# Conclusion

In this paper, we measure the net effect of COVID policy stringency on recreational marine fishing effort, among 16 states in the eastern U.S. To do so, we rely on data from the FES to measure the total number
of angler-trips in each state-month, and on the OxCGRT dataset to measure the average
level of COVID policy stringency in each state-month. We estimate a fixed effect 
Poisson model to estimate this non-monotonic relationship, allowing for state-specific
seasonality trends and time trends in the number of fishing trips.

Our results represent a composite effect of the actual local COVID policies, as
well as localized attitudes, risk tolerances, and beliefs about COVID-19 which
are correlated with COVID stringency. In particular, we see the inverse-U
relationship as the outcome of countervailing forces: (1) stringency reduces available substitutes of indoor
or high-density outdoor activities, increasing the attractiveness of fishing,
which is the dominant force on the low-stringency side of the curve, and (2)
COVID risk makes even a relatively distanced activity, such as fishing, less
appealing compared to entirely in-home activities such as cooking, backyard
games, video games, etc., which in addition to site closures is the dominating force on the high-stringency
side of the curve.

Overall, our results for the relationship between COVID policy stringency and total angler-trips taken, which show an approximately 20% increase in private boat trips taken at the levels of COVID stringency which predominated in most states by late 2020 into 2021, suggest that marine fishing activity was actually relatively stable throughout 2020, at least in comparison with socioeconomic indicators like unemployment, GDP, etc. which saw 3- or 4-sigma changes, sometimes the largest month-to-month changes since these statistics have been recorded.

This paper has considered specifically the impact of state-level COVID stringency
on in-state marine fishing trips taken by residents. Future research may also consider
the question of cross-state substitution of fishing trips, a question which can not
be answered sufficiently with the MRIP data we rely on in this paper. Such cross-state
substitution may be due to anglers seeking places with lower COVID stringency to 
vacation, or perhaps also by an increase in mobility due to the rise of remote 
work arrangements. One data source which may be appropriate to addressing this
question is the National Saltwater Angler Registry (NSAR), a database of all marine
fishing license sales for states covered by the MRIP program. The NSAR database
contains sufficient information to uniquely identify anglers, and could therefore
be used to measure not only the rate of sales of out-of-state temporary licenses to anglers from various origin
states, but also the rate of migration of anglers from one state to another based
on where they have purchased in-state licenses. Such analysis would likely show an increase
in angler migration to major destinations like Florida during COVID, but what is less
clear is whether a general pattern of migration toward states with lower COVID stringency
would be observed, such as from New York to New Hampshire.


In regards to policy implications, our results may be interpreted in a few ways.
For instance, to the extent that our results reflect the increased internal migration within the US, perhaps certain states in the Southeast will need to take account of persistent increased fishing pressure, while other states that have lost population will not. Or, to the extent that the results are driven by new participants in fishing, it will have to be seen whether these
new participants continue to use the fishery before we know if there will be long-run ramifications for management.
Relatedly, if increases in congestion (eg. boat ramps being busier, not only due to increased fishing activity but also increased boating in general) have effectively increased the cost of fishing trips, then angler welfare per trip may be reduced, which would have implications for the management of the fishery. Future research may seek to better understand 
the determinants of the change in effort, as well as the implications of these
changes for angler welfare and net benefits from the fishery.


# References {#references .unnumbered}

<div id="refs"></div>







<!--
# Extra stuff

## Misc. Summary Stats



## Time Series decomposition

```{r decompPs, fig.cap="Seasonality by State: Private",fig.height=6,fig.width=5,fig.align='center',eval=FALSE}


dSM=data_for_new_model %>%
  group_by(Mode,State) %>%
  tk_stl_diagnostics(date, box_cox_vec(TripsR),.message = FALSE)

pDecompS=function(m,t) {
  
  zz=subset(dSM,Mode==m)
  
  par(mfrow=c(4,4))
  
  if(t=="season") {
    sapply(unique(zz$State),FUN=function(x) plot(zz$season[zz$State==x],main=x,type="l"))
    } else {
      sapply(unique(zz$State),FUN=function(x) plot(zz$trend[zz$State==x],main=x,type="l"))
      }

par(mfrow=c(1,1))

}

pDecompS(7,"season")

```


```{r decompPt, fig.cap="Trend by State: Private",fig.height=6,fig.width=5,fig.align='center',eval=FALSE}
pDecompS(7,"trend")
```

```{r decompCs, fig.cap="Seasonality by State: Charter",fig.height=6,fig.width=5,fig.align='center',eval=FALSE}
pDecompS(5,"season")
```

```{r decompCt, fig.cap="Trend by State: Charter",fig.height=6,fig.width=5,fig.align='center',eval=FALSE}
pDecompS(5,"trend")
```

```{r decompSs, fig.cap="Seasonality by State: Shore",fig.height=6,fig.width=5,fig.align='center',eval=FALSE}
pDecompS(3,"season")
```

```{r decompSt, fig.cap="Trend by State: Shore",fig.height=6,fig.width=5,fig.align='center',eval=FALSE}
pDecompS(3,"trend")
```

## Two-way fixed effects (inferior model)

```{r regTbl2w,results='asis',eval=FALSE}


texreg(list(pm$reg0,cm$reg0,sm$reg0),custom.model.names = c("Private","Charter","Shore"),include.groups=FALSE,
       label="regResultsSS0",caption.above = TRUE,digits=4,include.deviance=FALSE,include.bic=TRUE,
       caption = "Poisson Fixed Effect Regression of Trips on Covid-19 Stringency, by Mode (2-way FE)",
       custom.note = "%stars. SEs clustered by state with small-sample adjustment.")

```

## Predicted trip plots in levels

```{r tripStringRelSC,fig.cap="Predicted Trips as a Function of the Stringency Index: Levels",fig.height=8,fig.width=4,eval=FALSE}

#Predicted trips as a function of stringency, including confidence intervals
pa=ggarrange(pm$pplot,cm$pplot,sm$pplot,ncol = 1, nrow = 3)
annotate_figure(pa,fig.lab = "Note: Based on Trips in Florida During June of 2019",fig.lab.pos = "bottom.left")

```
-->


